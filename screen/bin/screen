#!/bin/bash
screen=/usr/bin/screen

check_and_update_env()
{
    [ "$SSH_AUTH_SOCK" ] ||
        return

    for arg in "$@"
    do
        case $arg in
        -*r*|-*R*)
            $screen "$@" -X setenv SSH_AUTH_SOCK $SSH_AUTH_SOCK
            return $?;;
        esac
    done

}

check_and_update_env "$@" &&
    exec $screen "$@"
